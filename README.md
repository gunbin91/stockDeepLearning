# AI 주식 추천 시스템

## 1. 프로젝트 개요

이 프로젝트는 다양한 데이터를 기반으로 주식 종목을 분석하고 추천하는 시스템입니다. 재무 데이터, 시장 수급, 주가 모멘텀, 머신러닝 예측, 뉴스 감성 분석 등 여러 요소를 종합하여 종목별 점수를 산출하고 순위를 매겨 투자 의사결정을 돕습니다.

## 2. 핵심 추천 로직 (평가 기준)

이 시스템은 다음 6가지 핵심 요소를 종합하여 종목의 최종 점수를 산출하고 순위를 매깁니다. 각 요소는 0~100점 척도로 정규화되며, 가중 평균을 통해 최종 점수에 반영됩니다.

1.  **가치 점수 (Value Score)**: 기업의 내재 가치 대비 현재 주가 수준을 평가합니다. (저평가)
2.  **퀄리티 점수 (Quality Score)**: 기업의 재무 건전성과 수익성을 평가합니다. (우량주)
3.  **모멘텀 점수 (Momentum Score)**: 최근 주가 상승 추세의 강도를 평가합니다. (추세)
4.  **수급 점수 (Supply/Demand Score)**: 기관 및 외국인 투자자의 순매수 동향을 평가합니다. (수급)
5.  **머신러닝 예측 (ML Prediction)**: RandomForest 모델이 과거 데이터를 학습하여 미래 주가 상승 확률을 예측합니다.
6.  **뉴스 감성 점수 (Sentiment Score)**: 최신 뉴스 헤드라인을 분석하여 해당 종목에 대한 시장의 긍정/부정 감성을 평가합니다.

## 2.1. 최종 점수 산정 방식 (가중치)

최종 점수는 아래 6가지 팩터 점수의 **가중 평균**으로 계산됩니다. 각 팩터의 중요도를 나타내는 가중치는 다음과 같습니다.

| 팩터 (Factor) | 가중치 (Weight) | 설명 |
| :--- | :---: | :--- |
| **가치 (Value)** | 20% | 기업 내재가치 대비 저평가 정도 |
| **퀄리티 (Quality)** | 20% | 기업의 재무 건전성 및 수익성 |
| **모멘텀 (Momentum)** | 30% | 최근 주가 상승 추세의 강도 |
| **수급 (Supply/Demand)** | 0% | 안정적인 API 부재로 제외 |
| **변동성 (Volatility)** | 10% | 주가 변동성이 낮을수록 높은 점수 |
| **ML 예측 (ML Prediction)** | 20% | AI 모델이 예측한 미래 상승 확률 |

- **계산 과정**:
  1. 각 종목에 대해 위 6가지 팩터 점수(0~100점)를 계산합니다.
  2. 각 팩터 점수에 해당하는 가중치를 곱하여 합산합니다.
  3. 이렇게 계산된 가중 평균 점수를 전체 분석 대상 종목 내에서 다시 0~100점 척도로 스케일링하여 `최종 점수`를 산출합니다.
  4. 최종 점수가 높을수록 시스템이 더 강력하게 추천하는 종목을 의미합니다.

(*참고: 뉴스 감성분석 및 딥러닝 트렌드 점수는 현재 최종 점수 계산에서 제외되어 있습니다.*)

---

### **✅ 3단계: 사전 준비 및 실행**

1.  **필요 라이브러리 설치:** 터미널(명령 프롬프트)을 열고 아래 명령어를 실행하여, 이전의 잘못된 패키지를 삭제하고 **실제로 존재하는 검증된 라이브러리**들을 설치합니다.

    ```bash
    pip uninstall opendart-fss -y
    pip install -U finance-datareader dart-fss
    ```

2.  **DART API 인증키 발급 및 준비:**
    *   **[DART 인증키 신청 페이지](https://opendart.fss.or.kr/uss/umt/EgovStplat.do)**에 접속하여 **무료 인증키를 발급**받으세요.
    *   발급받은 키(약 40자의 영문/숫자)를 복사해서 메모장 등에 잠시 보관합니다. **아래 2개의 파일에 이 키를 입력해야 합니다.**

---

### **✅ 4단계: 최종 실행 가이드**

1.  **파일 교체:** 위 5개 파일(`requirements.txt`, `data_fetcher.py`, `train_model.py`, `scoring.py`, `ensemble.py`)의 내용을 프로젝트 폴더에 **완벽하게 덮어쓰기**합니다.
2.  **API 키 입력:** `data_fetcher.py`와 `train_model.py` 파일을 열어 **최상단에 DART API 인증키를 정확하게 입력**합니다.
3.  **라이브러리 재설치:** 터미널에서 `pip install -r requirements.txt`를 실행합니다.
4.  **모델 재학습 (필수!):** 터미널에서 `python train_model.py`를 실행하여, **새로운 데이터 구조에 맞는 모델을 생성**합니다. 이 과정은 시간이 걸릴 수 있습니다.
5.  **애플리케이션 실행:** 모델 학습이 완료되면, `streamlit run app.py` 명령어로 최종 애플리케이션을 실행합니다.

---

## 5. 주요 파일 설명

-   `app.py`: Streamlit 웹 애플리케이션의 메인 실행 파일입니다.
-   `start_app.command`: 가상 환경 설정 및 앱 실행을 자동화하는 스크립트입니다.
-   `train_model.py`: 머신러닝 모델(RandomForest)을 학습시키고 결과를 저장하는 스크립트입니다.
-   `stock_prediction_model_rf.joblib`: `train_model.py`를 통해 학습된 모델과 피처 정보가 저장된 파일입니다.
-   `requirements.txt`: 프로젝트에 필요한 Python 라이브러리 목록입니다.
-   `data_fetcher.py`: 주가, 재무 정보 등 데이터를 수집하는 모듈입니다.
-   `scoring.py`, `ml_model.py`, `nlp.py`, `ensemble.py`: 각 팩터 점수 계산, 예측, 최종 점수 산출 로직을 담고 있는 모듈입니다.

---

## 6. 면책 조항

이 프로젝트는 학습 및 연구 목적으로 개발되었습니다. 제공되는 모든 정보와 추천은 투자 자문이 아니며, 실제 투자 결정에 사용되어서는 안 됩니다. 투자 결정은 항상 본인의 판단과 책임 하에 이루어져야 합니다. 본 시스템의 사용으로 발생하는 어떠한 손실에 대해서도 개발자는 책임을 지지 않습니다.
